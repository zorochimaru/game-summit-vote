<div class="container admin-panel-container">
  <div class="actions">
    <mat-button-toggle-group [formControl]="typeControl">
      @for (item of types(); track $index) {
        <mat-button-toggle [value]="item">{{ item }}</mat-button-toggle>
      }
    </mat-button-toggle-group>

    <input type="file" id="input" hidden (change)="onFileChange($event)" />
    <button type="button" mat-fab>
      <label for="input">
        <mat-icon>upload_file</mat-icon>
      </label>
    </button>
    <input
      type="file"
      id="photosInput"
      hidden
      (change)="uploadAndImportImagesByOrder($event)" />
    <button type="button" mat-fab>
      <label for="photosInput">
        <mat-icon>photo_library</mat-icon>
      </label>
    </button>
    @if (rows().length) {
      <button type="button" mat-flat-button (click)="onSave()">Submit</button>
    }
  </div>

  @if (rows().length) {
    <section class="table-container mat-elevation-z4">
      <table mat-table [dataSource]="rows()">
        <!-- Position Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let element">{{ element.name }}</td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="count">
          <th mat-header-cell *matHeaderCellDef>Count</th>
          <td mat-cell *matCellDef="let element">{{ element.count }}</td>
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="fandom">
          <th mat-header-cell *matHeaderCellDef>Fandom</th>
          <td mat-cell *matCellDef="let element">{{ element.fandom }}</td>
        </ng-container>
        <!-- Position Column -->
        <ng-container matColumnDef="fandomType">
          <th mat-header-cell *matHeaderCellDef>Fandom Type</th>
          <td mat-cell *matCellDef="let element">{{ element.fandomType }}</td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="costumeType">
          <th mat-header-cell *matHeaderCellDef>Costume Type</th>
          <td mat-cell *matCellDef="let element">{{ element.costumeType }}</td>
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="characterDescription">
          <th mat-header-cell *matHeaderCellDef>Character Description</th>
          <td mat-cell *matCellDef="let element">
            {{ element.characterDescription }}
          </td>
        </ng-container>

        <!-- Image Column -->
        <ng-container matColumnDef="image">
          <th mat-header-cell *matHeaderCellDef>Image</th>
          <td mat-cell *matCellDef="let element">
            @if (element.img) {
              <img src="{{ element.imgUrl }}" alt="" />
            } @else {
              <input
                type="file"
                id="elementImageInput"
                hidden
                (change)="updateImage($event)" />
              <button type="button" mat-mini-fab>
                <label for="elementImageInput">
                  <mat-icon>image</mat-icon>
                </label>
              </button>
            }
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr
          mat-row
          class="item-row"
          *matRowDef="let row; columns: displayedColumns"
          (click)="editRow(row)"></tr>
      </table>
    </section>
  }
</div>
